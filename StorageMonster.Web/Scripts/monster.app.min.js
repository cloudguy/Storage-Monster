var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},MonsterApp;(function(n){var i,t,r;n.ApplicationContext={},i=function(){function t(){}return t.prototype.getTemplateCache=function(){return n.Utils.isObjectPresent(this.cacheContainer)||(this.cacheContainer=$(n.CssSelectors.TemplateCacheId)),this.cacheContainer},t.prototype.getTemplateSelector=function(n){return"#"+n},t.prototype.saveTemplate=function(n,t){return $('<script type="text/template" />').attr("id",n).html(t).appendTo(this.getTemplateSelector(n))},t.prototype.getTemplate=function(n,t){var u=this.getTemplateSelector(n),i=this.getTemplateCache().find(u),r;i.length===0&&(r="<div id='zz'>zzzzzzzz<\/div>",i=this.saveTemplate(n,r)),$.isFunction(t)&&t(i.html())},t}(),function(t){var i=function(){function t(t){this._context=t,n.Utils.isObjectPresent(this._context.MasterView)||(this._context.MasterView=new n.Views.MasterView),this._context.MasterView.render(),this._context.MainViewRendered=!0}return t.prototype.disposeMasterView=function(){n.Utils.isObjectPresent(this._context.MasterView)&&(this._context.MasterView.remove(),this._context.MasterView.unbind(),this._context.MasterView=null,this._context.MainViewRendered=!1)},t.prototype.renderView=function(){n.Utils.isObjectPresent(this._view)&&this._view.render()},t.prototype.dispose=function(){n.Utils.isObjectPresent(this._view)&&(this._view.remove(),this._view.unbind(),this._view=null),n.Utils.isObjectPresent(this._model)&&(this._model.unbind(),this._model=null)},t}(),r,u;t.BaseController=i,r=function(n){function t(t){n.call(this,t)}return __extends(t,n),t}(i),t.DefaultController=r,u=function(t){function i(n){t.call(this,n)}return __extends(i,t),i.prototype.show=function(){return this._model=new n.Models.ProfileModel,this._view=new n.Views.ProfileView({model:this._model}),this._model.bind("change",t.prototype.renderView,this),this._model.fetch(),this},i}(i),t.ProfileController=u}(n.Controllers||(n.Controllers={})),t=n.Controllers,function(t){var i=function(t){function i(){t.apply(this,arguments),this.urlRoot="account/profile"}return __extends(i,t),i.prototype.fetch=function(){var t=this;n.Ajax({url:this.url(),success:function(n){t.set(t.parse(n))}})},i}(Backbone.Model);t.ProfileModel=i}(n.Models||(n.Models={})),r=n.Models,function(t){var r=function(n){function t(t){n.call(this,t)}return __extends(t,n),t._templateManager=new i,t.prototype.getTemplate=function(n){t._templateManager.getTemplate(this._templateName,n)},t}(Backbone.View),u,f;t.BaseView=r,u=function(t){function i(i){this._templateName=n.TemplateNames.MasterViewTmpl,this.el=document.getElementById("mainContent"),t.call(this,i),_.bindAll(this)}return __extends(i,t),i.prototype.render=function(){this.getTemplate(this.renderTemplate)},i.prototype.renderTemplate=function(n){var t=_.template(n);this.$el.html(t())},i}(r),t.MasterView=u,f=function(t){function i(i){this._templateName=n.TemplateNames.ProfileTmpl,this.el=document.getElementById("innerContent"),t.call(this,i),_.bindAll(this)}return __extends(i,t),i.prototype.render=function(){this.getTemplate(this.renderTemplate)},i.prototype.renderTemplate=function(n){var i=_.template(n),t;this.$el.html(i({profile:this.model})),t=$("#profileForm"),t.removeData("validator"),t.removeData("unobtrusiveValidation"),$.validator.unobtrusive.parse(t),t.validate()},i}(r),t.ProfileView=f}(n.Views||(n.Views={}));var e=n.Views,u=function(){function t(n){this._context=n}return t.prototype.createController=function(t){return n.Utils.isObjectPresent(this._context.CurrentController)&&(this._context.CurrentController.dispose(),this._context.CurrentController=null),this._context.CurrentController=t(),this._context.CurrentController},t}(),f=function(i){function r(t){this.routes={profile:"profile","*actions":"defaultRoute"},i.call(this,t),this._context=n.ApplicationContext,this._controllerDispatcher=new u(this._context)}return __extends(r,i),r.prototype.profile=function(){var n=this._context;this._controllerDispatcher.createController(function(){return new t.ProfileController(n)}).show()},r.prototype.defaultRoute=function(){var n=this._context;this._controllerDispatcher.createController(function(){return new t.DefaultController(n)})},r}(Backbone.Router);n.Router=f})(MonsterApp||(MonsterApp={}))