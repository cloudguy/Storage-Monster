var MonsterApp;(function(n){function r(){$("<div>").addClass("loader").appendTo(n.CssSelectors.ModalLogonId)}function u(){$("div.loader").remove(),$(n.CssSelectors.ModalLogonId).modal("hide")}function t(f,e,o){$(n.CssSelectors.ModalLogonId+n.CssSelectors.ModalLogonBodyClass).html(f),$(n.CssSelectors.ModalLogonHeaderId).text(e),$.validator.unobtrusive.parse($(n.CssSelectors.ModalLogonId)),$(n.CssSelectors.ModalLogonId).modal("show");$(n.CssSelectors.ModalLogonId+n.CssSelectors.ModalLogonBodyClass+"form").on("submit",function(f){var e,s,h;(f.preventDefault(),e=$(n.CssSelectors.ModalLogonId+"form"),e.valid())&&(s=e.attr("action"),h=e.serialize(),$.ajax({url:s,data:h,dataType:"json",type:"post",success:function(n){if(typeof n.Authorized!="undefined"){if(n.Authorized===!1){t(n.LogOnPage,n.LogOnTitle,o),$("div.loader").remove();return}n.Authorized===!0&&(u(),i(o))}},error:function(t){var i=n.Messages.ServerError;typeof t.Error!="undefined"&&(i=t.Error),$(n.CssSelectors.ModalLogonId+n.CssSelectors.ErrorInfoBlock).text(i).show(),$("div.loader").remove()},beforeSend:function(){r()}}))})}function i(n){n||(n={});var i=n.success;return n.success=function(r){if(typeof r.Error!="undefined"){$.isFunction(n.error)&&n.error(r);return}if(typeof r.Authorized!="undefined"&&r.Authorized===!1){t(r.LogOnPage,r.LogOnTitle,n),$("div.loader").remove();return}$.isFunction(i)&&i(r)},$.ajax(n)}n.TemplateNames={MasterViewTmpl:"MasterViewTmpl",ProfileTmpl:"ProfileTmpl"},n.CssSelectors={ModalLogonId:" #modalLogon ",ModalLogonBodyClass:" .modal-body ",ModalLogonHeaderId:" #modalLogonHeader ",ErrorInfoBlock:" div[data-errorinfo] ",TemplateCacheId:" #templateCache "},n.Ajax=i})(MonsterApp||(MonsterApp={}))